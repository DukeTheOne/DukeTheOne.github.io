---
title : Operating System Structure-3.1
description : chapter 3.1  of the <Operating System Concepts>
tags : [os, notes, ]
---

# Process Management

---

## 3.1 - Process Concept

> A process is the basic unit of work in a computer system.

### Program vs Process

- **Program** : A program is a passive entity stored on disk. It is just a executable file with a set of instructions.
- **Process** : A process is an active entity having PC, CPU registers, stack, heap... It is a program in execution.

A single program may create many processes.

### Process Components

- Text section -> The program code.
- Program counter (PC) -> Address of next instruction.
- Stack -> Function parameters, return addresses, local variables.
- Data section -> Global variables, static variables.
- Heap -> Dynamically allocated memory.
- Registers -> CPU state.

### Process State

Each process moves between states as it executes. Only one process can be **running** per CPU core.

- **New** -> Being created.
- **Ready** -> Waiting for CPU.
- **Running** -> Executing on CPU.
- **Waiting/blocked** -> Waiting for I/O or event.
- **Terminated** -> finished execution.

Some systems include **suspended** state.

### Process Control Block (PCB)

**PCB** is the data structure the OS uses to manage a process. It contains : 

- Process state.
- Program counter.
- CPU registers.
- Scheduling info (priority, timeslices).
- Memory info (page tables, base/limit registers).
- I/O status.
- Open file list.
- Accounting info (CPU time used).

> **Context switching** is to save PCB of the running process and restore PCB of next process.

### Process Scheduling

OS selects which process gets the CPU next. When OS switches from process to another, the operation is called **context switch**.
More details covered in Chapter 5.

### Context Switch

**Context switch** is when CPU switches from one process to another.

1. Save current process state in PCB.
2. Load next process's PCB.
3. Resume execution.

During context switch, CPU stops executing process. The time and performance cost is called **context switch overhead**. 
The overhead not only comes from saving/restoring PCB, but also changing TLB, caches.

### Process Creation

Processes create other processes. Every process is created by a process.
We can from a process tree to represent parent-child relationships.

> In UNIX, ```fork()``` creates a new copy of parent, ```exec()``` replaces memory with new program.

### Process Termination

- Normal completion.
- Error exit.
- Being killed (```kill```, task manager).
- Parent terminating it.

Children may become **zombie/orphan processes**.

---

### Extra Points

#### Process != Thread

> A process is a full container with its own memory. A thread is a path of execution inside a process.

#### ```fork()``` and CoW

> Modern OSes use **copy-on-write**.
> Instead of duplicating the entire memory for the identical child process, we let the child share memory with parent.
> And only copy the data if one attemps to modify it.
